<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/blog/styles.78e12f610b2f7ec0a31e.css">@import url(https://fonts.googleapis.com/css2?family=Courier+Prime&display=swap);.layout-module--container--2TGku{display:grid;grid-template-areas:"header header header" ". main ." "footer footer footer";grid-template-rows:auto 1fr auto;flex-direction:column;align-items:center;width:100%;font-size:1rem}.layout-module--footer--1q4Vo,.layout-module--header--379cn{display:none}.layout-module--header--379cn{grid-area:header;grid-row:1;position:relative;color:rgba(var(--color-foreground-0),1)}.layout-module--main--2yme8{grid-row:2;grid-area:main;position:relative;box-sizing:border-box;width:100%;max-width:100vw;flex-grow:1;justify-self:center;padding:1em}@media screen and (min-width:480px){.layout-module--main--2yme8{padding:1.5rem}}@media screen and (min-width:720px){.layout-module--main--2yme8{padding:2rem;max-width:960px}}.layout-module--footer--1q4Vo{grid-row:3;grid-area:footer;position:relative;color:rgba(var(--color-foreground-0),1)}.blockquote-module--container--16WE_{display:grid;grid-template-columns:auto;grid-template-rows:auto 1fr auto;justify-items:center;align-items:center;width:100%;margin:1em 0;border:solid rgba(var(--color-secondary),1);border-width:0 0 0 .25rem;border-radius:.125rem}blockquote{position:relative;color:rgba(var(--color-secondary),1);font-style:italic;font-weight:400;line-height:1.75;padding:1em 1.5rem;background:rgba(var(--color-background-0),1);margin:0;border-width:0;flex-grow:1;width:100%;box-sizing:border-box}.call-out-module--call-out-wrapper--1t4_X{padding:1em;background:rgba(var(--color-primary),.08);border:solid rgba(var(--color-primary),1);border-width:0 0 0 .25rem;border-radius:.125rem}@media screen and (min-width:480px){.call-out-module--call-out-wrapper--1t4_X{padding:1.5rem}}@media screen and (min-width:720px){.call-out-module--call-out-wrapper--1t4_X{padding:2rem}}.call-out-module--call-out-wrapper--1t4_X h4{color:rgba(var(--color-foreground-0),1);text-transform:capitalize;font-weight:600;font-size:1.2rem}.call-out-module--call-out-wrapper--1t4_X p:last-of-type{margin-bottom:0}.code-block-module--wrapper--zoqri{display:block;position:relative;margin-top:1em;margin-bottom:1em;margin-left:0!important;margin-right:0!important}@media screen and (min-width:480px){.code-block-module--wrapper--zoqri{margin-top:1.5rem;margin-bottom:1.5rem}}@media screen and (min-width:720px){.code-block-module--wrapper--zoqri{margin-top:2rem;margin-bottom:2rem}}.code-block-module--filename--2WDOF{font-size:.875rem;font-weight:700;font-style:italic;padding:.125rem 0}.code-block-module--snippet--1lJYi{padding:.75rem 1rem}.code-block-module--snippet--1lJYi,pre{background:rgba(var(--color-background-0),1)}pre{padding:.5em;border-radius:.125rem;margin-top:.5em;max-width:100%;overflow:scroll;position:relative}@media screen and (min-width:480px){pre{padding:.75rem}}@media screen and (min-width:720px){pre{padding:1rem}}pre code{line-height:1.5rem!important;background:transparent!important;font-size:.875rem!important}pre code:first-child span{padding-right:.5em;color:rgba(var(--color-neutral),.4)!important}pre code span{font-family:monospace!important;color:rgba(var(--color-neutral),1)}.token.atrule{color:rgba(var(--color-foreground-0),1)}.token.comment{color:rgba(var(--color-neutral),.4)!important}.token.function{color:rgba(var(--color-prism-function),1)}.token.keyword{color:rgba(var(--color-prism-keyword),1)}.token.hexcode,.token.number,.token.unit{color:rgba(var(--color-foreground-0),1)}.token.property{color:rgba(var(--color-neutral),1)}.token.string{color:rgba(var(--color-prism-string),1)}.token.variable{color:rgba(var(--color-prism-variable),1)}.section-title-module--section-title--1aChP{font-size:1.25rem;font-weight:600;text-transform:capitalize;color:rgba(var(--color-foreground-0),1)}.published-date-module--date-box--1WOiW{color:rgba(var(--color-foreground-0),1);text-transform:capitalize;margin:0}.published-date-module--title--34Ia6{color:rgba(var(--color-foreground-0),1)}.tag-module--tag--1WjHu{padding:.25rem 1em;display:flex;align-items:center;justify-content:center;background:rgba(var(--color-secondary),.12);color:rgba(var(--color-secondary),1);box-sizing:border-box;border-radius:.125rem;font-weight:400;text-transform:lowercase;white-space:nowrap}.app-link-module--app-link--bXona{display:inline-flex;align-items:center;padding-left:.125rem;padding-right:.125rem;margin-left:-.125rem}.app-link-module--app-link--bXona a{outline:none;padding:.125rem 0;background-position:0 100%;background-size:auto 1px;background-repeat:repeat-x;background-image:linear-gradient(0deg,rgba(var(--color-primary),1) 1px,transparent 0);color:rgba(var(--color-primary),1);font-weight:400;cursor:pointer;order:2;border-radius:0;margin:0}.app-link-module--app-link--bXona i,.app-link-module--app-link--bXona svg{position:relative;color:rgba(var(--color-primary),1)}.app-link-module--app-link--bXona:focus,.app-link-module--app-link--bXona:hover{outline:none;background:rgba(var(--color-highlight),1);color:rgba(var(--color-background-0),1);border-radius:.125rem}@media (prefers-color-scheme:light){.app-link-module--app-link--bXona:focus,.app-link-module--app-link--bXona:hover{color:rgba(var(--color-foreground-0),1)}}.app-link-module--app-link--bXona:focus i,.app-link-module--app-link--bXona:focus svg,.app-link-module--app-link--bXona:hover i,.app-link-module--app-link--bXona:hover svg{color:inherit}.app-link-module--app-link--bXona:focus a,.app-link-module--app-link--bXona:focus span,.app-link-module--app-link--bXona:hover a,.app-link-module--app-link--bXona:hover span{background:none;color:inherit}.app-link-module--app-link--bXona.app-link-module--icon-align-left--T3MOn i,.app-link-module--app-link--bXona.app-link-module--icon-align-left--T3MOn svg{margin-right:.5em}.app-link-module--app-link--bXona.app-link-module--icon-align-right--zF4vV i,.app-link-module--app-link--bXona.app-link-module--icon-align-right--zF4vV svg{order:3;margin-left:.5em}.blog-post-module--article--2aW_3{display:block;position:relative;background:rgba(var(--color-background-1),1);color:rgba(var(--color-foreground-0),1)}.blog-post-module--header--ivRmN{border:none}.blog-post-module--title--17231{color:rgba(var(--color-foreground-0),1);line-height:1.4;font-size:1.75rem;font-weight:500;text-transform:capitalize;margin-bottom:.25rem}@media screen and (min-width:480px){.blog-post-module--title--17231{font-size:2rem}}img{border-radius:.25rem;overflow:hidden}.blog-post-module--horizontal-rule--25Us5{background:rgba(var(--color-background-2),1);width:100%;max-height:none;height:.25rem;border:none;opacity:.5;margin:1.5rem 0}@media screen and (min-width:720px){.blog-post-module--horizontal-rule--25Us5{margin:2rem 0}}.blog-post-module--article-nav-link--1NNhN .blog-post-module--icon--3IVdo{position:relative;transform:translateY(25%);margin-right:.5em;color:rgba(var(--color-primary),1)}.blog-post-module--article-nav-link--1NNhN:focus .blog-post-module--icon--3IVdo,.blog-post-module--article-nav-link--1NNhN:hover .blog-post-module--icon--3IVdo{color:rgba(var(--color-highlight),1)}.blog-post-module--published-date--QxA5L{margin-top:2em}@media screen and (min-width:480px){.blog-post-module--published-date--QxA5L{margin-top:3rem}}@media screen and (min-width:720px){.blog-post-module--published-date--QxA5L{margin-top:4rem}}@media screen and (min-width:480px){.blog-post-module--published-date--QxA5L{margin-top:1em}}@media screen and (min-width:480px) and (min-width:480px){.blog-post-module--published-date--QxA5L{margin-top:1.5rem}}@media screen and (min-width:480px) and (min-width:720px){.blog-post-module--published-date--QxA5L{margin-top:2rem}}.blog-post-module--embed--1KPfz{position:relative;max-width:100%}.topic-card-module--topic-card--XuY57{box-sizing:border-box;border-radius:.25rem;border:0 solid rgba(var(--color-background-2),1);background:rgba(var(--color-background-0),1);padding:1em;position:relative;display:grid;align-items:flex-start;grid-column-gap:1em;row-gap:1.5rem;grid-template-columns:auto 1fr}.topic-card-module--topic-card--XuY57:before{content:"";position:relative;display:block;width:100%;max-width:calc(100% - 1rem);height:2rem;position:absolute;z-index:-1;bottom:0;left:0;margin-left:.5rem;-webkit-filter:blur(.33rem);filter:blur(.33rem);background-color:rgba(var(--color-background-1),1);opacity:.15;display:none}.topic-card-module--card-content--2jhf6{display:grid;justify-items:flex-start;row-gap:1em}.topic-card-module--card-content--2jhf6 .topic-card-module--topic-link--1khmo{text-transform:capitalize;margin-top:.5em}.topic-card-module--card-content--2jhf6 .topic-card-module--topic-link--1khmo .topic-card-module--icon--3ak6j{position:relative;transform:translateY(25%);margin-left:.5em}.topic-card-module--card-content--2jhf6 .topic-card-module--description--3oRSX{color:rgba(var(--color-neutral),1)}.topic-card-module--card-content--2jhf6 .topic-card-module--tags--2lyxX{display:flex;flex-wrap:wrap;margin:0}.topic-card-module--card-content--2jhf6 .topic-card-module--tags--2lyxX .topic-card-module--tag--2xp1g{flex:1 1 1;margin:0 .5em .5em 0;font-size:.875rem}.topic-card-module--card-margin--3SxRS{display:flex;justify-content:center;align-items:flex-start}.topic-card-module--card-margin--3SxRS .topic-card-module--day-of-the-month--3w6lS{border-radius:100%;width:2.75rem;height:2.75rem;background:rgba(var(--color-background-1),1);color:rgba(var(--color-foreground-0),1);font-weight:400;display:flex;align-items:center;justify-content:center;box-sizing:border-box;position:relative;z-index:2}.topic-card-module--card-margin--3SxRS .topic-card-module--vertical-rule--UD3o3{position:absolute;top:0;height:100%;width:.125rem;z-index:1;background:rgba(var(--color-background-1),1)}.article-group-module--article-group--2ULvy{margin:0}.article-group-module--month--34wIG{color:rgba(var(--color-foreground-0),1);text-transform:capitalize;font-size:1.5rem;font-weight:600}.article-group-module--year--2GK8Q{color:rgba(var(--color-neutral),1);font-size:1rem;font-weight:400;margin-bottom:1.25rem}.article-group-module--topics--qBsQt{margin:0;padding:0;display:grid;grid-row-gap:1.2rem;grid-column-gap:1.2rem;grid-template-rows:auto;grid-template-columns:1fr}@media screen and (min-width:960px){.article-group-module--topics--qBsQt{grid-template-columns:1fr}}.article-group-module--topic--2Ti6t{list-style:none}:root{font-size:16px;--color-foreground-0:255,255,255;--color-neutral:179.46333,178.82857,197.87143;--color-background-2:47.86536,44.99821,66.50179;--color-background-1:24.49471,22.35786,33.04214;--color-background-0:14.425,12.375,22.625;--color-primary:170,130,255;--color-secondary:255,154,82;--color-highlight:255,226,38;--color-prism-function:160.3952,130.52,223.88;--color-prism-keyword:80,161,137;--color-prism-string:204.72,170.6624,87.28;--color-prism-variable:212.32,89.68,125.54642}@media (prefers-color-scheme:light){:root{--color-foreground-0:16,15,20;--color-neutral:95.56629,97.86861,112.83371;--color-background-2:225.45714,227.67286,232.84286;--color-background-1:240.02857,241.77524,243.77143;--color-background-0:255,255,255;--color-primary:92,74,199;--color-secondary:181,48,11;--color-highlight:255,226,38;--color-prism-function:92,74,199;--color-prism-keyword:29.93081,134.56919,103.56523;--color-prism-string:168.33578,137.63303,62.46422;--color-prism-variable:198.99808,82.60192,116.64231}}@media screen and (min-width:720px){:root{font-size:18px}}body,html{position:relative;height:auto;min-height:100%;min-width:100%;max-width:100%;width:100%;margin:0;padding:0;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol;color:rgba(var(--color-foreground-0),1)}body{background-color:rgba(var(--color-background-1),1)}h1,h2,h3,h4,h5,h6{margin:0;padding:0;line-height:1.5}h5,h6{line-height:1.5;font-size:1rem}a,dd,dt,li,p,span{font-weight:400;line-height:1.5;color:rgba(var(--color-neutral),1)}a{outline:none;background-position:0 100%;background-size:auto 1px;background-repeat:repeat-x;background-image:linear-gradient(0deg,rgba(var(--color-primary),1) 1px,transparent 0);color:rgba(var(--color-primary),1);font-weight:400;cursor:pointer;text-decoration:none;padding:.125rem;margin-left:-.125rem;margin-right:-.125rem}a,a:focus,a:hover{border-radius:.125rem}a:focus,a:hover{background:rgba(var(--color-highlight),1);color:rgba(var(--color-background-0),1)}@media (prefers-color-scheme:light){a:focus,a:hover{color:rgba(var(--color-foreground-0),1)}}dd,dt{margin:0}strong{color:rgba(var(--color-foreground-0),1);font-weight:600}.__gatsby{position:relative;margin:0}.embed img{position:relative;max-width:100%;height:auto}.code{color:rgba(var(--color-secondary),1);padding:.125rem;font-family:monospace}.page-module--page--3F1wH{position:relative}hr{border:none;outline:none;background-color:rgba(var(--color-background-2),1);height:.25rem;margin:1.5rem 0}@media screen and (min-width:720px){hr{margin:2rem 0}}.index-module--horizontal-rule--1_Od-{background:rgba(var(--color-background-2),1);width:100%;max-height:none;height:.25rem;border:none;opacity:.5;margin:1.5rem 0}@media screen and (min-width:720px){.index-module--horizontal-rule--1_Od-{margin:2rem 0}}.index-module--article-group--2I3Ot{margin-bottom:2rem}</style><meta name="generator" content="Gatsby 2.20.15"/><title data-react-helmet="true"></title><link rel="icon" href="/blog/icons/icon-48x48.png?v=070be5287d2142da3bb121858927d084"/><link rel="manifest" href="/blog/manifest.webmanifest"/><meta name="theme-color" content="#fff"/><link rel="apple-touch-icon" sizes="48x48" href="/blog/icons/icon-48x48.png?v=070be5287d2142da3bb121858927d084"/><link rel="apple-touch-icon" sizes="72x72" href="/blog/icons/icon-72x72.png?v=070be5287d2142da3bb121858927d084"/><link rel="apple-touch-icon" sizes="96x96" href="/blog/icons/icon-96x96.png?v=070be5287d2142da3bb121858927d084"/><link rel="apple-touch-icon" sizes="144x144" href="/blog/icons/icon-144x144.png?v=070be5287d2142da3bb121858927d084"/><link rel="apple-touch-icon" sizes="192x192" href="/blog/icons/icon-192x192.png?v=070be5287d2142da3bb121858927d084"/><link rel="apple-touch-icon" sizes="256x256" href="/blog/icons/icon-256x256.png?v=070be5287d2142da3bb121858927d084"/><link rel="apple-touch-icon" sizes="384x384" href="/blog/icons/icon-384x384.png?v=070be5287d2142da3bb121858927d084"/><link rel="apple-touch-icon" sizes="512x512" href="/blog/icons/icon-512x512.png?v=070be5287d2142da3bb121858927d084"/><link as="script" rel="preload" href="/blog/webpack-runtime-480dab6ad38cf368b281.js"/><link as="script" rel="preload" href="/blog/framework-4adb46e364577e67729f.js"/><link as="script" rel="preload" href="/blog/app-5dc41269603874b1ae14.js"/><link as="script" rel="preload" href="/blog/styles-0dd9b16d06f2e4f550cc.js"/><link as="script" rel="preload" href="/blog/02d529e9c63de17f611aad8b1faf348db0081e69-c8b906ff66ba2d1eaf90.js"/><link as="script" rel="preload" href="/blog/component---src-templates-blog-post-tsx-da6e5842bb0cea1d934c.js"/><link as="fetch" rel="preload" href="/blog/page-data/articles/supporting-os-appearance-settings-in-your-web-app/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/blog/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="layout-module--container--2TGku"><header class="layout-module--header--379cn">header</header><main class="layout-module--main--2yme8"><header><span class="app-link-module--app-link--bXona app-link-module--icon-align-left--T3MOn" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><polyline points="12 8 8 12 12 16"></polyline><line x1="16" y1="12" x2="8" y2="12"></line></svg><span><a tabindex="-1" href="/blog/">Other articles</a></span></span></header><hr class="blog-post-module--horizontal-rule--25Us5"/><article class="blog-post-module--article--2aW_3"><header class="blog-post-module--header--ivRmN"><h1 class="blog-post-module--title--17231">Supporting OS appearance settings in your web app</h1><span>Theming a web application to respond to appearance settings through media queries, CSS custom properties, and Sass variables.</span><div class="blog-post-module--published-date--QxA5L"><dl class="published-date-module--date-box--1WOiW"><dt class="published-date-module--title--34Ia6"><strong>date published</strong></dt><dd><time dateTime="2020-04-08T12:47:23+0000">April 8, 2020</time></dd></dl></div></header><hr class="blog-post-module--horizontal-rule--25Us5"/><section><p>There&#x27;s been a big trend in town for a while now that I have been meaning to explore.</p><p><strong>Dark mode.</strong></p><div data-oembed="https://media.giphy.com/media/229XocXgYTvIk/giphy.gif" data-oembed-type="rich" data-oembed-provider="static_image" class="embed embed-static_image"><div><div data-type="static_image"><img src="https://media.giphy.com/media/229XocXgYTvIk/giphy.gif"></div></div></div><p>Not knowing much about the subject as far as implementation and browser support, I did what any clueless developer would do. Consult the search engines!</p><p>Before we begin &#x27;solutioning&#x27;, allow me to present a list of some of my initial expectations the solution should support:</p><ul><li>Must be able to derive state from user&#x27;s OS preferences</li><li>Must be able to respond in real time to any changes to those preferences</li><li>Must not require individual media queries to apply themes at the component level</li><li>Must be composable to support authoring of complex rules</li></ul><p>It&#x27;s all about that <strong><span class="strong">DX</span></strong> (developer experience)! </p><p>This can be accomplished both via JavaScript (enabling support for CSS-in-JS libraries), and CSS (optionally in conjunction with your pre-processor of choice). My preference of the two is utilizing CSS modules, and is what I will be focusing on in this article. Similar principles and strategies should still apply regardless of your preference.</p><hr class="blog-post-module--horizontal-rule--25Us5"/><h3 class="section-title-module--section-title--1aChP">Establish a palette</h3><p>I&#x27;ve been known to change my mind on aesthetic choices from time to time. When working with design systems and style guides in early stages of maturity, tweaks and adjustments are perhaps inevitable. Abstracting out palette definitions from their application throughout the UI is a strategy I would highly recommend! This makes life far less complicated when working with a style guide in a frequent state of flux, as our definitions can be adjusted in one tidy place.</p><p>Pre-processors afford us the luxury of defining an array of value types, such as variables, lists, maps and even functions. They are powerful tools we hold in our repertoire, so let&#x27;s use them! Within Sass, let&#x27;s establish a map of palette entries to be used throughout our application.</p><p>If you aren&#x27;t familiar with <span class="code">List</span> and <span class="code">Map</span> support in Sass, here&#x27;s <a href="https://sass-lang.com/documentation/values">a quick primer</a> on value types, indexing, and access.</p><figure class="code-block-module--wrapper--zoqri"><figcaption class="code-block-module--filename--2WDOF">./src/styles/themes.scss</figcaption><pre class="hljs"><code style="font-family:Consolas, Menlo, Monaco, &quot;Andale Mono WT&quot;, &quot;Andale Mono&quot;, &quot;Lucida Console&quot;, &quot;Lucida Sans Typewriter&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Liberation Mono&quot;, &quot;Nimbus Mono L&quot;, &quot;Courier New&quot;, Courier, monospace;font-size:14px;line-height:1.375;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;background:#24242e;color:#767693;float:left;padding-right:10px"><span class="react-syntax-highlighter-line-number">1
</span><span class="react-syntax-highlighter-line-number">2
</span><span class="react-syntax-highlighter-line-number">3
</span><span class="react-syntax-highlighter-line-number">4
</span><span class="react-syntax-highlighter-line-number">5
</span><span class="react-syntax-highlighter-line-number">6
</span></code><code style="font-family:Consolas, Menlo, Monaco, &quot;Andale Mono WT&quot;, &quot;Andale Mono&quot;, &quot;Lucida Console&quot;, &quot;Lucida Sans Typewriter&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Liberation Mono&quot;, &quot;Nimbus Mono L&quot;, &quot;Courier New&quot;, Courier, monospace;font-size:14px;line-height:1.375;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;background:#24242e;color:#767693"><span class=""><span class="token property token variable">$palette</span><span class="token punctuation">:</span><span class=""> </span><span class="token punctuation">(</span><span class="">
</span></span><span class=""><span class="">  </span><span class="token string">&quot;black&quot;</span><span class="token punctuation">:</span><span class=""> #11120E</span><span class="token punctuation">,</span><span class="">
</span></span><span class=""><span class="">  </span><span class="token string">&quot;white&quot;</span><span class="token punctuation">:</span><span class=""> #FFFFFF</span><span class="token punctuation">,</span><span class="">
</span></span><span class=""><span class="">  </span><span class="token string">&quot;blue&quot;</span><span class="token punctuation">:</span><span class=""> #0973D6</span><span class="token punctuation">,</span><span class="">
</span></span><span class=""><span class="">  </span><span class="token string">&quot;orange&quot;</span><span class="token punctuation">:</span><span class=""> #FF9A1F
</span></span><span class=""><span class=""></span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre></figure><p></p><p>I&#x27;ve opted to start simply with a limited number of values. Style guides often define a variance of grayscale values which complement core palette entries which represent the brand. Feel free to define those and other key palette entries here. I will be generating my grayscale values via Sass <a href="https://sass-lang.com/documentation/values/colors">color functions.</a></p><hr class="blog-post-module--horizontal-rule--25Us5"/><h3 class="section-title-module--section-title--1aChP">Defining themes</h3><p>I want to express any given theme as a Sass <span class="code">Map</span> with a consistent model. If i were to define a key named <span class="code">myColor</span> in the model, <span class="code">themeA.myColor</span> and <span class="code">themeB.myColor</span> should both map to a Sass color appropriate for each theme respectively.</p><p>I will need a theme to support both <span class="code">light</span> and <span class="code">dark</span> appearance settings depending on a user&#x27;s OS configuration.</p><figure class="code-block-module--wrapper--zoqri"><figcaption class="code-block-module--filename--2WDOF">./src/styles/themes.scss</figcaption><pre class="hljs"><code style="font-family:Consolas, Menlo, Monaco, &quot;Andale Mono WT&quot;, &quot;Andale Mono&quot;, &quot;Lucida Console&quot;, &quot;Lucida Sans Typewriter&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Liberation Mono&quot;, &quot;Nimbus Mono L&quot;, &quot;Courier New&quot;, Courier, monospace;font-size:14px;line-height:1.375;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;background:#24242e;color:#767693;float:left;padding-right:10px"><span class="react-syntax-highlighter-line-number">1
</span><span class="react-syntax-highlighter-line-number">2
</span><span class="react-syntax-highlighter-line-number">3
</span><span class="react-syntax-highlighter-line-number">4
</span><span class="react-syntax-highlighter-line-number">5
</span><span class="react-syntax-highlighter-line-number">6
</span><span class="react-syntax-highlighter-line-number">7
</span><span class="react-syntax-highlighter-line-number">8
</span><span class="react-syntax-highlighter-line-number">9
</span><span class="react-syntax-highlighter-line-number">10
</span><span class="react-syntax-highlighter-line-number">11
</span><span class="react-syntax-highlighter-line-number">12
</span><span class="react-syntax-highlighter-line-number">13
</span><span class="react-syntax-highlighter-line-number">14
</span><span class="react-syntax-highlighter-line-number">15
</span><span class="react-syntax-highlighter-line-number">16
</span><span class="react-syntax-highlighter-line-number">17
</span><span class="react-syntax-highlighter-line-number">18
</span></code><code style="font-family:Consolas, Menlo, Monaco, &quot;Andale Mono WT&quot;, &quot;Andale Mono&quot;, &quot;Lucida Console&quot;, &quot;Lucida Sans Typewriter&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Liberation Mono&quot;, &quot;Nimbus Mono L&quot;, &quot;Courier New&quot;, Courier, monospace;font-size:14px;line-height:1.375;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;background:#24242e;color:#767693"><span class=""><span class="token comment">// dark theme value map</span><span class="">
</span></span><span class=""><span class=""></span><span class="token property token variable">$dark-theme</span><span class="token punctuation">:</span><span class=""> </span><span class="token punctuation">(</span><span class="">
</span></span><span class=""><span class="">  </span><span class="token property">background-0</span><span class="token punctuation">:</span><span class=""> </span><span class="token function">map-get</span><span class="token punctuation">(</span><span class="token variable">$palette</span><span class="token punctuation">,</span><span class=""> </span><span class="token string">&quot;black&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="">
</span></span><span class=""><span class="">  </span><span class="token property">background-1</span><span class="token punctuation">:</span><span class=""> </span><span class="token function">desaturate</span><span class="token punctuation">(</span><span class="token function">lighten</span><span class="token punctuation">(</span><span class="token function">map-get</span><span class="token punctuation">(</span><span class="token variable">$palette</span><span class="token punctuation">,</span><span class=""> </span><span class="token string">&quot;black&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class=""> 5%</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class=""> 50%</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="">
</span></span><span class=""><span class="">  </span><span class="token property">background-2</span><span class="token punctuation">:</span><span class=""> </span><span class="token function">desaturate</span><span class="token punctuation">(</span><span class="token function">lighten</span><span class="token punctuation">(</span><span class="token function">map-get</span><span class="token punctuation">(</span><span class="token variable">$palette</span><span class="token punctuation">,</span><span class=""> </span><span class="token string">&quot;black&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class=""> 12%</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class=""> 35%</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="">
</span></span><span class=""><span class="">  </span><span class="token property">neutral</span><span class="token punctuation">:</span><span class=""> </span><span class="token function">desaturate</span><span class="token punctuation">(</span><span class="token function">lighten</span><span class="token punctuation">(</span><span class="token function">map-get</span><span class="token punctuation">(</span><span class="token variable">$palette</span><span class="token punctuation">,</span><span class=""> </span><span class="token string">&quot;black&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class=""> 50%</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class=""> 28%</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="">
</span></span><span class=""><span class="">  </span><span class="token property">foreground</span><span class="token punctuation">:</span><span class=""> </span><span class="token function">map-get</span><span class="token punctuation">(</span><span class="token variable">$palette</span><span class="token punctuation">,</span><span class=""> </span><span class="token string">&quot;white&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="">
</span></span><span class=""><span class=""></span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="">
</span></span><span class="">
</span><span class=""><span class=""></span><span class="token comment">// light theme value map</span><span class="">
</span></span><span class=""><span class=""></span><span class="token property token variable">$light-theme</span><span class="token punctuation">:</span><span class=""> </span><span class="token punctuation">(</span><span class="">
</span></span><span class=""><span class="">  </span><span class="token property">background-0</span><span class="token punctuation">:</span><span class=""> </span><span class="token function">map-get</span><span class="token punctuation">(</span><span class="token variable">$palette</span><span class="token punctuation">,</span><span class=""> </span><span class="token string">&quot;white&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="">
</span></span><span class=""><span class="">  </span><span class="token property">background-1</span><span class="token punctuation">:</span><span class=""> </span><span class="token function">desaturate</span><span class="token punctuation">(</span><span class="token function">lighten</span><span class="token punctuation">(</span><span class="token function">map-get</span><span class="token punctuation">(</span><span class="token variable">$palette</span><span class="token punctuation">,</span><span class=""> </span><span class="token string">&quot;black&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class=""> 88%</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class=""> 10%</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="">
</span></span><span class=""><span class="">  </span><span class="token property">background-2</span><span class="token punctuation">:</span><span class=""> </span><span class="token function">desaturate</span><span class="token punctuation">(</span><span class="token function">lighten</span><span class="token punctuation">(</span><span class="token function">map-get</span><span class="token punctuation">(</span><span class="token variable">$palette</span><span class="token punctuation">,</span><span class=""> </span><span class="token string">&quot;black&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class=""> 80%</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class=""> 20%</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="">
</span></span><span class=""><span class="">  </span><span class="token property">neutral</span><span class="token punctuation">:</span><span class=""> </span><span class="token function">desaturate</span><span class="token punctuation">(</span><span class="token function">lighten</span><span class="token punctuation">(</span><span class="token function">map-get</span><span class="token punctuation">(</span><span class="token variable">$palette</span><span class="token punctuation">,</span><span class=""> </span><span class="token string">&quot;black&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class=""> 30%</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class=""> 28%</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="">
</span></span><span class=""><span class="">  </span><span class="token property">foreground</span><span class="token punctuation">:</span><span class=""> </span><span class="token function">map-get</span><span class="token punctuation">(</span><span class="token variable">$palette</span><span class="token punctuation">,</span><span class=""> </span><span class="token string">&quot;black&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="">
</span></span><span class=""><span class="">  </span><span class="token property">primary</span><span class="token punctuation">:</span><span class=""> </span><span class="token function">map-get</span><span class="token punctuation">(</span><span class="token variable">$palette</span><span class="token punctuation">,</span><span class=""> </span><span class="token string">&quot;blue&quot;</span><span class="token punctuation">)</span><span class="">
</span></span><span class=""><span class=""></span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre></figure><p>First thing you might notice from this snippet are the key names used within the map.</p><div data-oembed="https://media.giphy.com/media/14uRnBOrCwkOMU/giphy.gif" data-oembed-type="rich" data-oembed-provider="static_image" class="embed embed-static_image"><div><div data-type="static_image"><img src="https://media.giphy.com/media/14uRnBOrCwkOMU/giphy.gif"></div></div></div><p>I tend to avoid using specific color names for key names within the model. </p><p>The logic behind this is quite simple. By principle, our model and the corresponding key names remain fixed. However, the corresponding value may be unique for each theme. Choosing relativistic key names help to avoid awkward mismatches between them and the value they represent.</p><p>For example, let&#x27;s assume we have a key name <span class="code">white</span> in our model. Let&#x27;s assume our app&#x27;s default light theme expects this key to represent <span class="code">rgb(255, 255, 255)</span> or <span class="code">#FFF</span>. When authoring styles in this context, using this key name is easy to understand. </p><p>Now consider a different author intends to use our theme model with the underlying assumption the app&#x27;s default theme is dark. The key name <span class="code">white</span> should actually map to a relatively dark value. This becomes confusing and difficult to manage a mental map of each color key and their corresponding values.</p><p>By using relativistic terms to describe our color keys, we can alleviate some of the cognitive load. Using a key name of <span class="code">background</span> instead of <span class="code">white</span>, it is more clear what value this is intended to represent in the context of <em>any</em> theme</p><hr class="blog-post-module--horizontal-rule--25Us5"/><h3 class="section-title-module--section-title--1aChP">Theme Injection</h3><p>Having now defined our base palette and theme maps, it&#x27;s time to apply them as style rules to our document. To accomplish this, we will target the <span class="code">:root</span> pseudo-class. This will cascade throughout the node tree of our document, insuring visibility to any descendent node hoping to leverage them.</p><p>What precisely do we hope to define with these rules? We want to use our theme map to define CSS custom properties. </p><div data-oembed="https://media.giphy.com/media/SvHWvk8oZAqc0/giphy.gif" data-oembed-type="rich" data-oembed-provider="static_image" class="embed embed-static_image"><div><div data-type="static_image"><img src="https://media.giphy.com/media/SvHWvk8oZAqc0/giphy.gif"></div></div></div><p>Yes, I&#x27;m with you! Why CSS custom properties when we have the ability to leverage pre-processor variables? My thoughts on this are as follows:</p><p>CSS pre-processors (such as Sass) evaluate and compile style rules precisely when the term suggests, at build time. Unfortunately, our style rules won&#x27;t know which theme should be applied until a user loads the app. Unlike pre-processor variables, CSS custom properties are evaluated at run time. </p><p>If we can incorporate values generated at build-time into properties that can further be evaluated at run time, we can create variables that can use a single color key to author our styles, have them map to unique values depending on the current theme, and potentially allow further manipulation of the underlying value!</p><p>I&#x27;ve already authored color mappings for each theme. I hope to avoid having to do that again when applying mapped values as explicit rules. So I intend to write a Sass mixin to generate each theme map as individual style rules. </p><figure class="code-block-module--wrapper--zoqri"><figcaption class="code-block-module--filename--2WDOF">./src/styles/themes.scss</figcaption><pre class="hljs"><code style="font-family:Consolas, Menlo, Monaco, &quot;Andale Mono WT&quot;, &quot;Andale Mono&quot;, &quot;Lucida Console&quot;, &quot;Lucida Sans Typewriter&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Liberation Mono&quot;, &quot;Nimbus Mono L&quot;, &quot;Courier New&quot;, Courier, monospace;font-size:14px;line-height:1.375;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;background:#24242e;color:#767693;float:left;padding-right:10px"><span class="react-syntax-highlighter-line-number">1
</span><span class="react-syntax-highlighter-line-number">2
</span><span class="react-syntax-highlighter-line-number">3
</span><span class="react-syntax-highlighter-line-number">4
</span><span class="react-syntax-highlighter-line-number">5
</span></code><code style="font-family:Consolas, Menlo, Monaco, &quot;Andale Mono WT&quot;, &quot;Andale Mono&quot;, &quot;Lucida Console&quot;, &quot;Lucida Sans Typewriter&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Liberation Mono&quot;, &quot;Nimbus Mono L&quot;, &quot;Courier New&quot;, Courier, monospace;font-size:14px;line-height:1.375;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;background:#24242e;color:#767693"><span class=""><span class="token keyword">@mixin</span><span class=""> </span><span class="token function">map-css-custom-props-by-theme</span><span class="token punctuation">(</span><span class="token variable">$theme</span><span class="token punctuation">)</span><span class=""> </span><span class="token punctuation">{</span><span class="">
</span></span><span class=""><span class="">  </span><span class="token keyword">@each</span><span class=""> </span><span class="token selector token variable">$color-key</span><span class="token selector">, </span><span class="token selector token variable">$color</span><span class="token selector"> in </span><span class="token selector token variable">$theme</span><span class="token selector"> </span><span class="token punctuation">{</span><span class="">
</span></span><span class=""><span class="">    </span><span class="token property">--color-</span><span class="token property token variable">#{$color-key}</span><span class="token punctuation">:</span><span class=""> #</span><span class="token punctuation">{</span><span class="token function">red</span><span class="token punctuation">(</span><span class="token variable">$color</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class=""> </span><span class="token function">green</span><span class="token punctuation">(</span><span class="token variable">$color</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class=""> </span><span class="token function">blue</span><span class="token punctuation">(</span><span class="token variable">$color</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="">
</span></span><span class=""><span class="">  </span><span class="token punctuation">}</span><span class="">
</span></span><span class=""><span class=""></span><span class="token punctuation">}</span></span></code></pre></figure><p>This mixin will iterate through each color key within our theme map and output a string representing a composed custom property name and the color primaries of its corresponding value. Note that the key name is formatted to support CSS <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/--*">custom property notation</a> with additional namespacing to avoid any potential collisions. </p><p>Why a string of just the color primaries? Why not map a complete and valid CSS color notation? </p><div data-oembed="https://media.giphy.com/media/cwTtbmUwzPqx2/giphy.gif" data-oembed-type="rich" data-oembed-provider="static_image" class="embed embed-static_image"><div><div data-type="static_image"><img src="https://media.giphy.com/media/cwTtbmUwzPqx2/giphy.gif"></div></div></div><p>CSS allows colors to be defined through either <span class="code">hexadecimal</span> or <span class="code">functional<strong></strong></span><strong> </strong>notation. Unlike many color functions built into many pre-processors, CSS functional notation does not accept other expressions as parameters for additional manipulation.</p><p> For example, <span class="code">rgb(#ffccee)</span> is not a valid CSS color, and would invalidate any rule attempting to express a color in such terms. By contrast, many pre-processors allow and encourage this type of expression. To circumvent this limitation, I hope to defer expressing a complete color until the moment it needs to be applied. </p><p>To accomplish this, we presume any expression of color will use functional notation. When the color is to be applied, its full CSS representation will compose a functional expression encapsulating a string representing its red, green, and blue components which are determined at run time.</p><section class="call-out-module--call-out-wrapper--1t4_X"><h4>Color notation footnote</h4><p>The <a href="https://www.w3.org/TR/css-color-4/#rgb-functions">CSS Color Module Level 4</a> specification <strong>does</strong> allow an 8-character hexadecimal notation, which would afford us the ability to compose additional alpha channel information to our palette values (defined in 6-digit hexadecimal notation). This would require us to express those channel values in a range of <span class="code">00</span> to <span class="code">FF</span>. I&#x27;m sure one could write a custom Sass function to map a more brain-friendly expression on a scale of 0-100 (or 0-1) to hexadecimal. For my purposes it is simpler to compose color opacity using functional notation.</p></section><p>Let&#x27;s use this mixin to apply our themed CSS custom properties to our app.</p><figure class="code-block-module--wrapper--zoqri"><figcaption class="code-block-module--filename--2WDOF">./src/styles/global.scss</figcaption><pre class="hljs"><code style="font-family:Consolas, Menlo, Monaco, &quot;Andale Mono WT&quot;, &quot;Andale Mono&quot;, &quot;Lucida Console&quot;, &quot;Lucida Sans Typewriter&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Liberation Mono&quot;, &quot;Nimbus Mono L&quot;, &quot;Courier New&quot;, Courier, monospace;font-size:14px;line-height:1.375;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;background:#24242e;color:#767693;float:left;padding-right:10px"><span class="react-syntax-highlighter-line-number">1
</span><span class="react-syntax-highlighter-line-number">2
</span><span class="react-syntax-highlighter-line-number">3
</span><span class="react-syntax-highlighter-line-number">4
</span><span class="react-syntax-highlighter-line-number">5
</span><span class="react-syntax-highlighter-line-number">6
</span><span class="react-syntax-highlighter-line-number">7
</span><span class="react-syntax-highlighter-line-number">8
</span><span class="react-syntax-highlighter-line-number">9
</span><span class="react-syntax-highlighter-line-number">10
</span><span class="react-syntax-highlighter-line-number">11
</span></code><code style="font-family:Consolas, Menlo, Monaco, &quot;Andale Mono WT&quot;, &quot;Andale Mono&quot;, &quot;Lucida Console&quot;, &quot;Lucida Sans Typewriter&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Liberation Mono&quot;, &quot;Nimbus Mono L&quot;, &quot;Courier New&quot;, Courier, monospace;font-size:14px;line-height:1.375;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;background:#24242e;color:#767693"><span class=""><span class="token selector">:root </span><span class="token punctuation">{</span><span class="">
</span></span><span class=""><span class="">  </span><span class="token comment">// other rules that may exist in the document root</span><span class="">
</span></span><span class="">
</span><span class=""><span class="">  </span><span class="token comment">// By default, map dark-mode theme variables</span><span class="">
</span></span><span class=""><span class="">  </span><span class="token keyword">@include</span><span class=""> </span><span class="token function">map-css-custom-props-by-theme</span><span class="token punctuation">(</span><span class="token variable">$dark-theme</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="">
</span></span><span class="">
</span><span class=""><span class="">  </span><span class="token comment">// If user prefers light theme, apply light-theme variables instead</span><span class="">
</span></span><span class=""><span class="">  </span><span class="token atrule token rule">@media</span><span class="token atrule"> </span><span class="token atrule token punctuation">(</span><span class="token atrule token property">prefers-color-scheme</span><span class="token atrule token punctuation">:</span><span class="token atrule"> light</span><span class="token atrule token punctuation">)</span><span class=""> </span><span class="token punctuation">{</span><span class="">
</span></span><span class=""><span class="">    </span><span class="token keyword">@include</span><span class=""> </span><span class="token function">map-css-custom-props-by-theme</span><span class="token punctuation">(</span><span class="token variable">$light-theme</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="">
</span></span><span class=""><span class="">  </span><span class="token punctuation">}</span><span class="">
</span></span><span class=""><span class=""></span><span class="token punctuation">}</span></span></code></pre></figure><p>I&#x27;m using our aforementioned mixin to first define a default theme to be applied to our app. The mixin accepts a string argument representing the theme name, which then references the color model of that theme within our theme map variable. </p><p>A simple media query for <span class="code">prefers-color-scheme</span> can be leveraged to determine whether the user&#x27;s OS has specified a preference. The query is at the time of authoring this post <a href="https://caniuse.com/#feat=prefers-color-scheme">rather widely supported,</a> and will respond dynamically to any changes made to those preference settings in real time.</p><section class="call-out-module--call-out-wrapper--1t4_X"><h4>The JavaScript option</h4><p>If you chose the JavaScript route, you are likely going to be interested in the <span class="code">window.matchMedia </span>method. It similarly detects current OS appearance settings by parsing a <span class="code">mediaQueryString</span>. Conveniently, one can also attach event listeners to detect changes associated with the query.</p></section><hr class="blog-post-module--horizontal-rule--25Us5"/><h3 class="section-title-module--section-title--1aChP">Color referencing</h3><p>Now that we have our CSS custom properties defined for each of our themes, how do we go about using them?</p><p>Remember from earlier, our custom properties hold reference to a component string, not a complete and valid color expression. If we were to simply attempt to reference our custom properties by themselves, the entire rule would become invalid and summarily ignored by the browser.</p><p>We can, however, write a Sass function which will compose a valid CSS color expression!</p><div data-oembed="https://media.giphy.com/media/cQNRp4QA8z7B6/giphy.gif" data-oembed-type="rich" data-oembed-provider="static_image" class="embed embed-static_image"><div><div data-type="static_image"><img src="https://media.giphy.com/media/cQNRp4QA8z7B6/giphy.gif"></div></div></div><figure class="code-block-module--wrapper--zoqri"><figcaption class="code-block-module--filename--2WDOF">./src/styles/themes.scss</figcaption><pre class="hljs"><code style="font-family:Consolas, Menlo, Monaco, &quot;Andale Mono WT&quot;, &quot;Andale Mono&quot;, &quot;Lucida Console&quot;, &quot;Lucida Sans Typewriter&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Liberation Mono&quot;, &quot;Nimbus Mono L&quot;, &quot;Courier New&quot;, Courier, monospace;font-size:14px;line-height:1.375;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;background:#24242e;color:#767693;float:left;padding-right:10px"><span class="react-syntax-highlighter-line-number">1
</span><span class="react-syntax-highlighter-line-number">2
</span><span class="react-syntax-highlighter-line-number">3
</span></code><code style="font-family:Consolas, Menlo, Monaco, &quot;Andale Mono WT&quot;, &quot;Andale Mono&quot;, &quot;Lucida Console&quot;, &quot;Lucida Sans Typewriter&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Liberation Mono&quot;, &quot;Nimbus Mono L&quot;, &quot;Courier New&quot;, Courier, monospace;font-size:14px;line-height:1.375;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;background:#24242e;color:#767693"><span class=""><span class="token keyword">@function</span><span class=""> </span><span class="token function">rgba-color</span><span class="token punctuation">(</span><span class="token variable">$theme-color</span><span class="token punctuation">,</span><span class=""> </span><span class="token property token variable">$opacity</span><span class="token punctuation">:</span><span class=""> 1</span><span class="token punctuation">)</span><span class=""> </span><span class="token punctuation">{</span><span class="">
</span></span><span class=""><span class="">  </span><span class="token keyword">@return</span><span class=""> </span><span class="token function">RGBA</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span><span class="">--color-</span><span class="token variable">#{$theme-color}</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class=""> </span><span class="token variable">$opacity</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="">
</span></span><span class=""><span class=""></span><span class="token punctuation">}</span></span></code></pre></figure><p>I am defining a function here called <span class="code">rgba-color()</span> which expects a required <span class="code">$theme-color</span> argument and an optional <span class="code">$opacity</span> argument which defaults to 1 (or full opacity). The function returns a CSS <span class="code">rgba()</span> functional notation as expressed by Sass. It then wraps the <span class="code">$theme-color</span> argument inside a <span class="code">var()</span> function notation, and pre-fixed with a double-dash with a corresponding namespace tag. Any explicit, valid opacity values are included within the functional notation to represent a complete and valid CSS color.</p><section class="call-out-module--call-out-wrapper--1t4_X"><h4>Module dependency foootnote</h4><p>If you are using the latest version of <span class="code">lib-sass</span> module in your project, there is no need for the distinction. Use capitalization if you cannot control your module dependency versions (such as authoring a pen in <a href="https://codepen.io/">Codepen</a> for example).</p></section><p>We can use this function to compose our style rules and even specify the value of a color&#x27;s alpha component.</p><figure class="code-block-module--wrapper--zoqri"><figcaption class="code-block-module--filename--2WDOF">./src/components/my-component.module.scss</figcaption><pre class="hljs"><code style="font-family:Consolas, Menlo, Monaco, &quot;Andale Mono WT&quot;, &quot;Andale Mono&quot;, &quot;Lucida Console&quot;, &quot;Lucida Sans Typewriter&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Liberation Mono&quot;, &quot;Nimbus Mono L&quot;, &quot;Courier New&quot;, Courier, monospace;font-size:14px;line-height:1.375;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;background:#24242e;color:#767693;float:left;padding-right:10px"><span class="react-syntax-highlighter-line-number">1
</span><span class="react-syntax-highlighter-line-number">2
</span><span class="react-syntax-highlighter-line-number">3
</span><span class="react-syntax-highlighter-line-number">4
</span><span class="react-syntax-highlighter-line-number">5
</span><span class="react-syntax-highlighter-line-number">6
</span><span class="react-syntax-highlighter-line-number">7
</span><span class="react-syntax-highlighter-line-number">8
</span><span class="react-syntax-highlighter-line-number">9
</span><span class="react-syntax-highlighter-line-number">10
</span><span class="react-syntax-highlighter-line-number">11
</span></code><code style="font-family:Consolas, Menlo, Monaco, &quot;Andale Mono WT&quot;, &quot;Andale Mono&quot;, &quot;Lucida Console&quot;, &quot;Lucida Sans Typewriter&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Liberation Mono&quot;, &quot;Nimbus Mono L&quot;, &quot;Courier New&quot;, Courier, monospace;font-size:14px;line-height:1.375;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;background:#24242e;color:#767693"><span class="token selector token comment token comment"><span class="token comment">/* 
</span></span><span class="token selector token comment token comment">  Assumes proper webpack configuration to support
</span><span class="token selector token comment token comment">  aliases and resolving for .scss file extensions
</span><span class="token selector token comment token comment"><span class="token comment">*/</span><span class="">
</span></span><span class="token selector token comment token comment"><span class=""></span><span class="token keyword">@import</span><span class=""> </span><span class="token selector">&quot;~styles/themes&quot;
</span></span><span class="token selector token comment token comment">
</span><span class="token selector token comment token comment"><span class="token selector">.my-component </span><span class="token punctuation">{</span><span class="">
</span></span><span class="token selector token comment token comment"><span class="">  </span><span class="token property">color</span><span class="token punctuation">:</span><span class=""> </span><span class="token function">rgba-color</span><span class="token punctuation">(</span><span class="">foreground</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="">
</span></span><span class="token selector token comment token comment"><span class="">  </span><span class="token property">background-color</span><span class="token punctuation">:</span><span class=""> </span><span class="token function">rgba-color</span><span class="token punctuation">(</span><span class="">background-0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="">
</span></span><span class="token selector token comment token comment"><span class="">  </span><span class="token property">drop-shadow</span><span class="token punctuation">:</span><span class=""> 0 4px 8px </span><span class="token function">rgba-color</span><span class="token punctuation">(</span><span class="">foreground</span><span class="token punctuation">,</span><span class=""> 0.25</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="">
</span></span><span class="token selector token comment token comment"><span class=""></span><span class="token punctuation">}</span></span></code></pre></figure><p>I&#x27;m now able to author styles using relativistic terminology as if I were authoring any other CSS color using functional notation. I can control the opacity of the color with the second parameter representing a valid CSS opacity value. I can compose statements with our color function as I would expect with any other CSS or Sass color type. And finally, I can author all of these rules without having to including numerous media queries to apply theme-specific values.</p><p>If you want to see the full implementation of the concepts applied here, I&#x27;ve created a <a href="https://codepen.io/st0ven/pen/eYpOBBx">pen</a> which puts this all to practice. As soon as Prismic figures out why oEmbeds coming from Codepen break on their platform, I&#x27;ll have it embedded below</p></section></article><hr class="blog-post-module--horizontal-rule--25Us5"/><footer><span class="app-link-module--app-link--bXona app-link-module--icon-align-left--T3MOn" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><polyline points="16 12 12 8 8 12"></polyline><line x1="12" y1="16" x2="12" y2="8"></line></svg><span><a tabindex="-1" href="/blog/articles/supporting-os-appearance-settings-in-your-web-app/#">Back to top</a></span></span></footer></main><footer class="layout-module--footer--1q4Vo">footer</footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/articles/supporting-os-appearance-settings-in-your-web-app";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-5dc41269603874b1ae14.js"],"component---src-templates-blog-post-tsx":["/component---src-templates-blog-post-tsx-da6e5842bb0cea1d934c.js"],"component---src-pages-404-js":["/component---src-pages-404-js-69bf6c24d2d358cfe4e1.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx-bab1ee7e7c8dec18e79c.js"]};/*]]>*/</script><script src="/blog/component---src-templates-blog-post-tsx-da6e5842bb0cea1d934c.js" async=""></script><script src="/blog/02d529e9c63de17f611aad8b1faf348db0081e69-c8b906ff66ba2d1eaf90.js" async=""></script><script src="/blog/styles-0dd9b16d06f2e4f550cc.js" async=""></script><script src="/blog/app-5dc41269603874b1ae14.js" async=""></script><script src="/blog/framework-4adb46e364577e67729f.js" async=""></script><script src="/blog/webpack-runtime-480dab6ad38cf368b281.js" async=""></script></body></html>